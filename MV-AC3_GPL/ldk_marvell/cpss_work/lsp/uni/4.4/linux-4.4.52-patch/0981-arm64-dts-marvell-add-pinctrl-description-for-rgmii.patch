From 952c531ba6ec4ce9430535f657e14cd550fdd5bb Mon Sep 17 00:00:00 2001
From: Grzegorz Jaszczyk <jaz@semihalf.com>
Date: Fri, 2 Sep 2016 13:05:29 +0200
Subject: [PATCH 0981/2241] arm64: dts: marvell: add pinctrl description for
 rgmii

Placing pinctrl description, inside one of the child node of 'ppv22' would
be more clear. Unfortunately pinctrl description can not be moved to the
child nodes of 'ppv22', because the pinctrl framework requires that the
description is placed inside the device nodes (it is because all pinctrl
routines are called during driver_probe_device). In case of ppv2, there is
only one driver registered for whole ppv22, which is common for each port.

Change-Id: Ia94bd7cd7438cfe3df2029d5bd17cb6af7ea71cc
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/32934
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
---
 arch/arm64/boot/dts/marvell/armada-8040-db-router.dts |  6 ++++++
 arch/arm64/boot/dts/marvell/armada-8040.dtsi          | 15 +++++++++++++++
 2 files changed, 21 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts
index 9abdf79..bc00a55 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts
@@ -90,6 +90,9 @@
 				};
 			};
 			ppv22@000000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&cpm_ge2_rgmii_pins>;
+
 				eth0: eth0@010000 {
 					status = "okay";
 				};
@@ -130,6 +133,9 @@
 				};
 			};
 			ppv22@000000 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&cps_ge1_rgmii_pins>;
+
 				eth0_1: eth0@010000 {
 					status = "okay";
 				};
diff --git a/arch/arm64/boot/dts/marvell/armada-8040.dtsi b/arch/arm64/boot/dts/marvell/armada-8040.dtsi
index d494dd7..26dc838 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-8040.dtsi
@@ -140,6 +140,13 @@
 					marvell,pins = "mpp37", "mpp38";
 					marvell,function = "i2c0";
 				};
+				cpm_ge2_rgmii_pins: ge-rgmii-pins-0 {
+					marvell,pins = "mpp44", "mpp45", "mpp46",
+						       "mpp47", "mpp48", "mpp49",
+						       "mpp50", "mpp51", "mpp52",
+						       "mpp53", "mpp54", "mpp55";
+					marvell,function = "ge1";
+				};
 			};
 			usb3h0: usb3@500000 {
 				#stream-id-cells = <1>;
@@ -184,6 +191,14 @@
 			};
 			pinctrl@440000 {
 				compatible = "marvell,a80x0-cp1-pinctrl";
+
+				cps_ge1_rgmii_pins: ge-rgmii-pins-0 {
+					marvell,pins = "mpp0", "mpp1", "mpp2",
+						       "mpp3", "mpp4", "mpp5",
+						       "mpp6", "mpp7", "mpp8",
+						       "mpp9", "mpp10", "mpp11";
+					marvell,function = "ge0";
+				};
 			};
 		};
 		pcie@0x600000 {
-- 
2.7.4

