From f204e6c120c472bc860a67ef9d466183cc73e6e8 Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Tue, 24 Jan 2017 13:38:53 +0200
Subject: [PATCH 1305/2241] rt: clean compilation warnings after applying
 PREEMPT_RT patch

Change-Id: Ia149cef98577f05be0101d25fe468246fcd16ce4
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/35978
Reviewed-by: Omri Itach <omrii@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Tested-by: Hanna Hawa <hannah@marvell.com>
---
 ...mpilation-warnings-after-applying-PREEMPT.patch | 41 ++++++++++++++++++++++
 1 file changed, 41 insertions(+)
 create mode 100644 tools/rt/0003-rt-clean-compilation-warnings-after-applying-PREEMPT.patch

diff --git a/tools/rt/0003-rt-clean-compilation-warnings-after-applying-PREEMPT.patch b/tools/rt/0003-rt-clean-compilation-warnings-after-applying-PREEMPT.patch
new file mode 100644
index 0000000..2f4e7c4
--- /dev/null
+++ b/tools/rt/0003-rt-clean-compilation-warnings-after-applying-PREEMPT.patch
@@ -0,0 +1,41 @@
+From 234d7fb6add95d194b70eb9432d29b8ffb96ee50 Mon Sep 17 00:00:00 2001
+From: Marcin Wojtas <mw@semihalf.com>
+Date: Tue, 24 Jan 2017 11:58:29 +0100
+Subject: [PATCH 3/3] rt: clean compilation warnings after applying PREEMPT_RT
+ patch
+
+Signed-off-by: Marcin Wojtas <mw@semihalf.com>
+---
+ drivers/tty/serial/amba-pl011.c | 2 +-
+ kernel/sched/core.c             | 2 +-
+ 2 files changed, 2 insertions(+), 2 deletions(-)
+
+diff --git a/drivers/tty/serial/amba-pl011.c b/drivers/tty/serial/amba-pl011.c
+index 3ff6363..5cd664b 100644
+--- a/drivers/tty/serial/amba-pl011.c
++++ b/drivers/tty/serial/amba-pl011.c
+@@ -2062,7 +2062,7 @@ pl011_console_write(struct console *co, const char *s, unsigned int count)
+ {
+ 	struct uart_amba_port *uap = amba_ports[co->index];
+ 	unsigned int status, old_cr = 0, new_cr;
+-	unsigned long flags;
++	unsigned long flags = 0;
+ 	int locked = 1;
+ 
+ 	clk_enable(uap->clk);
+diff --git a/kernel/sched/core.c b/kernel/sched/core.c
+index da96d97..d641c61 100644
+--- a/kernel/sched/core.c
++++ b/kernel/sched/core.c
+@@ -3468,7 +3468,7 @@ static __always_inline int preemptible_lazy(void)
+ 	return 1;
+ }
+ 
+-#else
++#elif defined(CONFIG_PREEMPT)
+ 
+ static int preemptible_lazy(void)
+ {
+-- 
+1.9.1
+
-- 
2.7.4

