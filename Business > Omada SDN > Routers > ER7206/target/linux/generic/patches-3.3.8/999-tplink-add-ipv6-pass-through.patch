--- a/net/ipv6/ip6_input.c	2017-04-28 17:15:23.331831241 +0800
+++ b/net/ipv6/ip6_input.c	2017-04-28 17:16:33.875830721 +0800
@@ -19,6 +19,7 @@
  * 	YOSHIFUJI Hideaki @USAGI: Remove ipv6_parse_exthdrs().
  */
 
+#include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/types.h>
 #include <linux/socket.h>
@@ -46,6 +47,8 @@
 #include <net/xfrm.h>
 
 
+int ipv6_pass_through_enable = 0;
+EXPORT_SYMBOL(ipv6_pass_through_enable);
 
 inline int ip6_rcv_finish( struct sk_buff *skb)
 {
@@ -62,7 +65,7 @@
 	struct inet6_dev *idev;
 	struct net *net = dev_net(skb->dev);
 
-	if (skb->pkt_type == PACKET_OTHERHOST) {
+	if (!ipv6_pass_through_enable && skb->pkt_type == PACKET_OTHERHOST) {
 		kfree_skb(skb);
 		return NET_RX_DROP;
 	}
