From 5bbd4ed62609b38c703de499f75e371555e25f87 Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Thu, 7 Sep 2017 16:13:55 +0300
Subject: [PATCH 2004/2241] net: mvpp2x: rename RSS mode enum

Changes are cosmetic, no functional changes.

Change-Id: Id5b66d49ad1e05e7ebb428b0c593ea162a7dce7d
Signed-off-by: Stefan Chulski <stefanc@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/43978
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
---
 drivers/net/ethernet/marvell/mvpp2x/mv_pp2x.h         | 16 ++++++++--------
 drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_ethtool.c |  6 +++---
 drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c    |  8 ++++----
 3 files changed, 15 insertions(+), 15 deletions(-)

diff --git a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x.h b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x.h
index 5ee8302..33fca73 100644
--- a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x.h
+++ b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x.h
@@ -225,13 +225,13 @@ enum mv_pp2x_cos_classifier {
 	MVPP2_COS_CLS_DSCP_VLAN
 };
 
-enum mv_pp2x_rss_nf_udp_mode {
-	MVPP2_RSS_NF_UDP_2T,	/* non-frag UDP packet hash value
-				* is calculated based on 2T
-				*/
-	MVPP2_RSS_NF_UDP_5T	/* non-frag UDP packet hash value
-				*is calculated based on 5T
-				*/
+enum mv_pp2x_rss_mode {
+	MVPP2_RSS_2T,	/* non-frag UDP&TCP packet hash value
+			 * is calculated based on 2T
+			 */
+	MVPP2_RSS_5T	/* non-frag UDP&TCP packet hash value
+			 * is calculated based on 5T
+			 */
 };
 
 struct gop_stat {
@@ -512,7 +512,7 @@ struct mv_pp2x_cos {
 };
 
 struct mv_pp2x_rss {
-	u8 rss_mode; /*UDP packet */
+	u8 rss_mode; /*UDP&TCP packets */
 	u8 dflt_cpu; /*non-IP packet */
 	u8 rss_en;
 };
diff --git a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_ethtool.c b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_ethtool.c
index 2e19fdc..95b2994 100644
--- a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_ethtool.c
+++ b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_ethtool.c
@@ -784,7 +784,7 @@ static int mv_pp2x_get_rss_hash_opts(struct mv_pp2x_port *port,
 	case UDP_V4_FLOW:
 	case UDP_V6_FLOW:
 		nfc->data |= RXH_IP_SRC | RXH_IP_DST;
-		if (port->rss_cfg.rss_mode == MVPP2_RSS_NF_UDP_5T)
+		if (port->rss_cfg.rss_mode == MVPP2_RSS_5T)
 			nfc->data |= RXH_L4_B_0_1 | RXH_L4_B_2_3;
 		break;
 	case IPV4_FLOW:
@@ -851,10 +851,10 @@ static int mv_pp2x_set_rss_hash_opt(struct mv_pp2x_port *port,
 			return -EINVAL;
 		switch (nfc->data & (RXH_L4_B_0_1 | RXH_L4_B_2_3)) {
 		case 0:
-			mv_pp22_rss_mode_set(port, MVPP2_RSS_NF_UDP_2T);
+			mv_pp22_rss_mode_set(port, MVPP2_RSS_2T);
 			break;
 		case (RXH_L4_B_0_1 | RXH_L4_B_2_3):
-			mv_pp22_rss_mode_set(port, MVPP2_RSS_NF_UDP_5T);
+			mv_pp22_rss_mode_set(port, MVPP2_RSS_5T);
 			break;
 		default:
 			return -EINVAL;
diff --git a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
index a5ca00d9..5d29063 100644
--- a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
+++ b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
@@ -121,7 +121,7 @@ module_param_named(queue_mode, mv_pp2x_queue_mode, byte, S_IRUGO);
 MODULE_PARM_DESC(queue_mode, "Set queue_mode (single=0, multi=1)");
 
 module_param(rss_mode, byte, S_IRUGO);
-MODULE_PARM_DESC(rss_mode, "Set rss_mode (UDP_2T=0, UDP_5T=1)");
+MODULE_PARM_DESC(rss_mode, "Set rss_mode (2T=0, 5T=1)");
 
 module_param(default_cpu, byte, S_IRUGO);
 MODULE_PARM_DESC(default_cpu, "Set default CPU for non RSS frames");
@@ -2319,8 +2319,8 @@ int mv_pp22_rss_mode_set(struct mv_pp2x_port *port, int rss_mode)
 	if (port->priv->pp2_cfg.queue_mode == MVPP2_QDIST_SINGLE_MODE)
 		return -1;
 
-	if (rss_mode != MVPP2_RSS_NF_UDP_2T &&
-	    rss_mode != MVPP2_RSS_NF_UDP_5T) {
+	if (rss_mode != MVPP2_RSS_2T &&
+	    rss_mode != MVPP2_RSS_5T) {
 		pr_err("Invalid rss mode:%d\n", rss_mode);
 		return -EINVAL;
 	}
@@ -2355,7 +2355,7 @@ int mv_pp22_rss_mode_set(struct mv_pp2x_port *port, int rss_mode)
 			if (flow_info->flow_entry_dscp)
 				data[2] = flow_info->flow_entry_dscp;
 			/* Second, update port in original table with rss_mode*/
-			if (rss_mode == MVPP2_RSS_NF_UDP_2T)
+			if (rss_mode == MVPP2_RSS_2T)
 				flow_idx_rss = flow_info->flow_entry_rss1;
 			else
 				flow_idx_rss = flow_info->flow_entry_rss2;
-- 
2.7.4

