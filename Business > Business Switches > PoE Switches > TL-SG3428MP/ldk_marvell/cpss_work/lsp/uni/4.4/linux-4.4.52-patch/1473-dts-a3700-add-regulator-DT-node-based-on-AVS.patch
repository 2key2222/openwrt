From 0eca31d09ed18891692cc00b96ce9c7a993e595f Mon Sep 17 00:00:00 2001
From: Victor Gu <xigu@marvell.com>
Date: Fri, 17 Mar 2017 14:37:04 +0800
Subject: [PATCH 1473/2241] dts: a3700: add regulator DT node based on AVS

This patch adds the AVS regulator DT node, which is supposed to
be used by CPU DVS to change the CPU voltage dynamically.

Change-Id: I0c114f918dccad5a85ad6f63a767d2ffe912f11f
Signed-off-by: Victor Gu <xigu@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/37534
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Evan Wang <xswang@marvell.com>
---
 arch/arm64/boot/dts/marvell/armada-3720-community.dts | 4 ++++
 arch/arm64/boot/dts/marvell/armada-3720-db.dts        | 4 ++++
 arch/arm64/boot/dts/marvell/armada-37xx.dtsi          | 7 +++++++
 3 files changed, 15 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-community.dts b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
index 2b6abb2..c9f5d03 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-community.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
@@ -72,6 +72,10 @@
 				status = "okay";
 			};
 
+			reg_avs: avs@11500 {
+				status = "okay";
+			};
+
 			eth0: ethernet@30000 {
 				phy-mode = "rgmii-id";
 				status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db.dts b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
index d76c341..e4bc50b0 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
@@ -106,6 +106,10 @@
 				status = "okay";
 			};
 
+			reg_avs: avs@11500 {
+				status = "okay";
+			};
+
 			/*
 			* Exported on the micro USB connector CON32
 			* through an FTDI
diff --git a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
index 4a4878a..c1bab6f 100644
--- a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
@@ -149,6 +149,13 @@
 				status = "disabled";
 			};
 
+			reg_avs: avs@11500 {
+				compatible = "marvell,armada-3700-avs";
+				reg = <0x11500 0x40>;
+				clocks = <&core_clk 4>;
+				status = "disabled";
+			};
+
 			uart0: serial@12000 {
 				compatible = "marvell,armada-3700-uart";
 				reg = <0x12000 0x200>;
-- 
2.7.4

