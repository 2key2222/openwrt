From 21420f812cf2b9e146161fd70ffe4c6d33b41faa Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Sun, 2 Apr 2017 14:55:52 +0300
Subject: [PATCH 1546/2241] clk: ap806: add support for CPU frequnecy clock at
 2GHz

added 2 mising Sample at reset entries to AP806 syscon driver:
0x0: CPU@2000Mhz , RCLK/DDR@1200 Mhz , DCLK@600Mhz, PIDI@1000Mhz
0x1: CPU@2000Mhz , RCLK/DDR@1050 Mhz , DCLK@525Mhz, PIDI@1000Mhz

This frequency addition also fixes issues in CPUfreq driver with CPU@2Ghz.

Change-Id: Id46a50502529b3d467ff6773f249808a3effee57
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/38342
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
---
 drivers/clk/mvebu/ap806-system-controller.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/drivers/clk/mvebu/ap806-system-controller.c b/drivers/clk/mvebu/ap806-system-controller.c
index ccb0723..aec41bf 100644
--- a/drivers/clk/mvebu/ap806-system-controller.c
+++ b/drivers/clk/mvebu/ap806-system-controller.c
@@ -53,6 +53,9 @@ static void __init ap806_syscon_clk_init(struct device_node *np)
 
 	freq_mode = reg & AP806_SAR_CLKFREQ_MODE_MASK;
 	switch (freq_mode) {
+	case 0x0 ... 0x1:
+		cpuclk_freq = 2000;
+		break;
 	case 0x4:
 	case 0xB ... 0x12:
 		cpuclk_freq = 1600;
@@ -87,6 +90,12 @@ static void __init ap806_syscon_clk_init(struct device_node *np)
 
 	/* Get DCLK frequency */
 	switch (freq_mode) {
+	case 0x0:
+		dclk_freq = 600;
+		break;
+	case 0x1:
+		dclk_freq = 525;
+		break;
 	case 0x4:
 	case 0x10:
 	case 0x14:
-- 
2.7.4

