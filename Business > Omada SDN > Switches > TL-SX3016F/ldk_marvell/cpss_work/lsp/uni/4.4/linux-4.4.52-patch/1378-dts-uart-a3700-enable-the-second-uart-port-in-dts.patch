From 4969d4aa2a01bef89f37cd6b7a867612b6950c76 Mon Sep 17 00:00:00 2001
From: allen yan <yanwei@marvell.com>
Date: Tue, 27 Dec 2016 00:08:59 +0800
Subject: [PATCH 1378/2241] dts: uart: a3700: enable the second uart port in
 dts

Change-Id: Ic245d1b55cef90b7bae32f3897768a4cb0969a2d
Signed-off-by: allen yan <yanwei@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/35006
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Hua Jing <jinghua@marvell.com>
---
 arch/arm64/boot/dts/marvell/armada-3720-db.dts |  6 ++++++
 arch/arm64/boot/dts/marvell/armada-37xx.dtsi   | 13 +++++++++++++
 2 files changed, 19 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db.dts b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
index 296ba39..ecb0164 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
@@ -114,6 +114,12 @@
 				status = "okay";
 			};
 
+			uart1: serial@12200 {
+				pinctrl-names = "default";
+				pinctrl-0 = <&uart1_pins>;
+				status = "okay";
+			};
+
 			eth0: ethernet@30000 {
 				phy-mode = "rgmii-id";
 				phy = <&phy0>;
diff --git a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
index c5abd15..550d260 100644
--- a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
@@ -59,6 +59,7 @@
 		ethernet0 = &eth0;
 		ethernet1 = &eth1;
 		serial0 = &uart0;
+		serial1 = &uart1;
 		gpio0 = &gpio_nb;
 		gpio1 = &gpio_sb;
 	};
@@ -150,11 +151,23 @@
 			uart0: serial@12000 {
 				compatible = "marvell,armada-3700-uart";
 				reg = <0x12000 0x200>;
+				clocks = <&osc>;
 				interrupts = <GIC_SPI 11 IRQ_TYPE_LEVEL_HIGH>;
 				interrupt-names = "irq_sum";
 				status = "disabled";
 			};
 
+			uart1: serial@12200 {
+				compatible = "marvell,armada-3700-uart-ext";
+				reg = <0x12200 0x30>,
+					<0x8a00 0x30>;
+				clocks = <&osc>;
+				interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>,
+						<GIC_SPI 30 IRQ_TYPE_LEVEL_HIGH>;
+				interrupt-names = "irq_rx", "irq_tx";
+				status = "disabled";
+			};
+
 			core_clk: core-clocks@13000 {
 				compatible = "marvell,armada-3700-core-clock";
 				reg = <0x13000 0x6000>;
-- 
2.7.4

