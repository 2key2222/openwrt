From 963559bf4cb6ae56317b386dce3cc009f0dcbff2 Mon Sep 17 00:00:00 2001
From: Konstantin Porotchkin <kostap@marvell.com>
Date: Sun, 26 Feb 2017 12:36:45 +0200
Subject: [PATCH 1407/2241] fix: dts: a8040-mcbin: Enable COMPHY devices in DT

Each SATA device node includes a pointer (phandle) to a phy unit
(COMPHY), but the COMPHY node itself is not enabled and as result the
COMPHY driver is not loaded.
It leads to a SATA device detection failure.
This patch enables COMPHY nodes in Macchiatobin DTS file.

Change-Id: Ib8c9b3869b2972063ca8a9db661531cf49df356b
Signed-off-by: Konstantin Porotchkin <kostap@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/37002
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Igal Liberman <igall@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/37107
---
 arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts b/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts
index 70fbf19..87ce8f3 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts
@@ -97,6 +97,9 @@
 					marvell,function = "gpio";
 				};
 			};
+			comphy0: comphy {
+				status = "okay";
+			};
 			sdhci@780000 {
 				vqmmc-supply = <&vccq_sdio_reg>;
 				bus-width = <4>;
@@ -166,6 +169,9 @@
 
 	cpn-110-slave {
 		config-space {
+			comphy1: comphy {
+				status = "okay";
+			};
 			usb3h0_1: usb3@500000 {
 				usb-phy = <&usb3h0_phy>;
 				status = "okay";
-- 
2.7.4

