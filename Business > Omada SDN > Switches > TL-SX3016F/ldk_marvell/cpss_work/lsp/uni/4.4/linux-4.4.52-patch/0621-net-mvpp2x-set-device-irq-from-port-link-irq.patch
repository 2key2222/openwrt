From ed48d754d7131affc043bbd0110d2e018ede0679 Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Wed, 20 Jul 2016 16:23:24 +0300
Subject: [PATCH 0621/2241] net: mvpp2x: set device irq from port link irq

Change-Id: Id68bf15b16f6bd6f03f132558795a6d6bf3eb61d
Signed-off-by: Stefan Chulski <stefanc@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/31286
Reviewed-by: Yuval Caduri <cyuval@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
---
 drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
index a84f969..97a4189 100644
--- a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
+++ b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
@@ -1451,6 +1451,8 @@ int mv_pp2x_setup_irqs(struct net_device *dev, struct mv_pp2x_port *port)
 				   port->mac_data.link_irq);
 			goto err_cleanup;
 		}
+		if (!dev->irq)
+			dev->irq = port->mac_data.link_irq;
 	}
 	return 0;
 err_cleanup:
-- 
2.7.4

